(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(e,t,a){e.exports=a(341)},333:function(e,t,a){},341:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),i=a.n(o),s=a(344),c=a(342),l=a(343),m=a(21),p=a.n(m),u=a(29),d=a(54),h="notes.UPDATE_NOTE_LIST",g="notes.SET_CURRENT_NOTE",f={notes:{},titles:[],noteId:void 0,editingNote:!1,note:{}};var v=a(132),b=Object(d.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case h:return Object.assign({},e,{notes:t.notes,titles:t.titles});case g:return Object.assign({},e,{noteId:t.noteId});default:return e}},Object(d.a)(v.a)),E=a(149),y=a.n(E),w=a(15),k=a(28),j=a(18),O=a(17),N=a(19),S=a(24),C=a(92),x=a(16),I=a(42),T=a.n(I),A=a(53),_=a.n(A),D=a(6),P=a.n(D),z=a(133),H=a.n(z),R=a(89),M=a.n(R),B=a(43),W=a.n(B),L=a(66),F=a.n(L),U=a(71),q=a.n(U),V=a(134),$=a.n(V);function J(e){for(var t={},a=[],n=0;n<e.length;n++)t[e[n].id]=e[n],a.push(e[n].name);return console.log(e),console.log(a),{type:h,notes:t,titles:a}}function G(e){return{type:g,noteId:e}}var K=new(function(){function e(){Object(w.a)(this,e)}return Object(k.a)(e,[{key:"projectHost",value:function(){return"https://notes.machinable.io"}},{key:"getAuthHeaders",value:function(){return{Authorization:"Bearer "+this.getAccessToken()}}},{key:"getRefreshToken",value:function(){return localStorage.getItem("refresh_token")}},{key:"getAccessToken",value:function(){return localStorage.getItem("access_token")}},{key:"setAccessToken",value:function(e){localStorage.setItem("access_token",e)}},{key:"user",value:function(){var e=this.projectHost()+"/sessions/",t=this.projectHost()+"/users/register",a=this.projectHost()+"/sessions/refresh",n=this.projectHost()+"/sessions/{sid}",r=this.getAuthHeaders(),o={Authorization:"Bearer "+this.getRefreshToken()};return{login:function(t,a){var n={Authorization:"Basic "+window.btoa(t+":"+a)};return p.a.post(e,{},{headers:n})},register:function(e,a){return p.a.post(t,{username:e,password:a,read:!0,write:!0})},saveTokens:function(e,t,a){localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t),localStorage.setItem("session_id",a)},refreshToken:function(){return p.a.post(a,{},{headers:o})},logout:function(e,t){this.deleteCurrentSession(function(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("session_id"),e()},t)},deleteCurrentSession:function(e,t){var a=localStorage.getItem("session_id");if(a){var o=r,i=n.replace("{sid}",a);p.a.delete(i,{headers:o}).then(e).catch(t)}e()}}}},{key:"notes",value:function(){var e=this.projectHost()+"/api/notes?_limit=100&_sort=-_metadata.created",t=this.projectHost()+"/api/notes",a=this.projectHost()+"/api/notes/{id}",n=this.projectHost()+"/api/notes/{id}",r=this.projectHost()+"/api/notes/{id}",o=this.getAuthHeaders();return{list:function(t,a){p.a.get(e,{headers:o}).then(t).catch(a)},create:function(e,a,n){p.a.post(t,e,{headers:o}).then(a).catch(n)},update:function(e,t,a,r){p.a.put(n.replace("{id}",e),t,{headers:o}).then(a).catch(r)},get:function(e,t,n){p.a.get(a.replace("{id}",e),{headers:o}).then(t).catch(n)},deleteNote:function(e,t,a){p.a.delete(r.replace("{id}",e),{headers:o}).then(t).catch(a)}}}}]),e}()),Q=function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(j.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).newNote=function(){var e="Note "+(Object.keys(a.props.notes).length+1);K.notes().create({name:e,content:"# "+e+"\n"},a.listNotes,a.err)},a.err=function(e){console.log("error --"),console.log(e)},a.recieveNotes=function(e){a.props.dispatch(J(e.data.items))},a.listNotes=function(){K.notes().list(a.recieveNotes,a.err)},a.componentDidMount=function(){a.listNotes()},a.selectNote=function(e){a.props.history.push("/"+e)},a}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.variant,o=t.open,i=t.onClose,s=t.notes,c=[];s&&(c=Object.values(s));var l=[{id:"My Notes",children:c}];return r.a.createElement(H.a,{variant:n,open:o,onClose:i},r.a.createElement(M.a,{disablePadding:!0},r.a.createElement(W.a,{className:P()(a.firebase,a.item,a.itemCategory)},"notes"),r.a.createElement(W.a,{button:!0,onClick:this.newNote,className:P()(a.item,a.itemCategory)},r.a.createElement(F.a,null,r.a.createElement($.a,null)),r.a.createElement(q.a,{classes:{primary:a.itemPrimary}},"New Note")),l.map(function(t){var n=t.id,o=t.children;return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(W.a,{className:a.categoryHeader},r.a.createElement(q.a,{classes:{primary:a.categoryHeaderPrimary}})),o.map(function(t){var n=t.id,o=t.name;return r.a.createElement(W.a,{button:!0,dense:!0,selected:n===e.props.noteId,key:n,onClick:function(){return e.selectNote(n)},className:P()(a.item,a.itemActionable,n===e.props.noteId&&a.itemActiveItem)},r.a.createElement(q.a,{classes:{primary:a.itemPrimary,textDense:a.textDense}},o))}))})))}}]),t}(n.Component);var X=Object(x.withStyles)(function(e){return{categoryHeader:{paddingTop:16,paddingBottom:16},categoryHeaderPrimary:{color:e.palette.common.white},item:{paddingTop:4,paddingBottom:4,color:"rgba(255, 255, 255, 0.7)"},itemCategory:{backgroundColor:"#232f3e",boxShadow:"0 -1px 0 #404854 inset",paddingTop:16,paddingBottom:16},firebase:{fontSize:24,fontFamily:e.typography.fontFamily,color:e.palette.common.white},itemActionable:{"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},itemActiveItem:{color:"#4fc3f7"},itemPrimary:{color:"inherit",fontSize:e.typography.fontSize,"&$textDense":{fontSize:e.typography.fontSize}},textDense:{},divider:{marginTop:2*e.spacing.unit}}})(Object(u.b)(function(e){return{noteId:e.noteId,notes:e.notes}})(Q)),Y=a(52),Z=a(20),ee=a.n(Z),te=a(27),ae=a.n(te),ne=a(41),re=a.n(ne),oe=a(31),ie=a.n(oe),se=a(34),ce=a.n(se),le=a(137),me=a.n(le),pe=a(138),ue=a.n(pe),de=a(139),he=a.n(de),ge=a(72),fe=a.n(ge),ve=a(135),be=a.n(ve),Ee=a(136),ye=(a(301),/^(?:#)\s*(.+?)[ \t]*$/m),we=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).err=function(e){console.log("error --"),console.log(e),a.setState({loading:!1})},a.recieveNote=function(e){a.setState({note:e.data,loading:!1})},a.getNote=function(){var e=Object(Y.a)(a);setTimeout(function(){K.notes().get(e.props.noteId,e.recieveNote,e.err)},250)},a.componentDidUpdate=function(e){a.props.noteId!==e.noteId&&a.setState({loading:!0,note:void 0},a.getNote)},a.componentDidMount=function(){a.props.noteId&&a.getNote()},a.handleValueChange=function(e){var t=a.state.note;t.content=e,a.setState({note:t})},a.handleTabChange=function(e){a.setState({tab:e})},a.toggleEdit=function(){a.setState({edit:!a.state.edit})},a.saveNote=function(){var e=Object(Y.a)(a),t=a.state.note.content;console.log(t);var n=ye.exec(t);console.log(n);var r="Create a header for title";n&&n.length>0&&(r=n[0].replace(/# /g,"").replace(/#/g,""));var o=a.state.note;o.name=r;var i=a.props.notes;i[a.state.note.id]=o,K.notes().update(a.state.note.id,{content:t,name:r},function(){e.setState({edit:!e.state.edit}),e.props.dispatch(J(Object.values(i)))},function(){})},a.deleteNote=function(){K.notes().deleteNote(a.state.note.id,a.refreshList,function(e){console.log("error"),console.log(e)})},a.refreshList=function(){var e=a.props.history,t=a.props.notes;delete t[a.state.note.id],a.props.dispatch(J(Object.values(t))),e.push("/")},a.render=function(){var e=a.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{className:e.paper},r.a.createElement("div",{className:"note-header"},a.props.noteId&&a.state.loading&&r.a.createElement(ee.a,{component:"span",align:"center"},r.a.createElement(re.a,null)),a.props.noteId&&!a.state.loading&&r.a.createElement(ie.a,{container:!0,spacing:8,alignItems:"center"},!a.state.edit&&r.a.createElement(ie.a,{item:!0},r.a.createElement(fe.a,{title:"Edit this note"},r.a.createElement(ce.a,{color:"primary",onClick:a.toggleEdit},r.a.createElement(me.a,{className:e.create})))),a.state.edit&&r.a.createElement(ie.a,{item:!0},r.a.createElement(fe.a,{title:"Save change to note"},r.a.createElement(ce.a,{color:"primary",onClick:a.saveNote},r.a.createElement(ue.a,{className:e.create})))),r.a.createElement(ie.a,{item:!0},r.a.createElement(fe.a,{title:"Delete this note"},r.a.createElement(ce.a,{color:"secondary",onClick:a.deleteNote},r.a.createElement(he.a,{className:e.delete})))))),!a.state.edit&&r.a.createElement("div",{className:e.contentWrapper},r.a.createElement(ee.a,{color:"textSecondary",align:"center"},!a.props.noteId&&"Select or create a new note"),a.state.note&&!a.state.edit&&r.a.createElement(ee.a,{component:"span"},r.a.createElement("div",{className:"override-mde-preview mde-preview"},r.a.createElement("div",{className:"mde-preview-content"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.converter.makeHtml(a.state.note.content)}}))))),a.state.note&&a.state.edit&&r.a.createElement(ee.a,{component:"span"},r.a.createElement(be.a,{onChange:a.handleValueChange,onTabChange:a.handleTabChange,value:a.state.note.content,generateMarkdownPreview:function(e){return Promise.resolve(a.converter.makeHtml(e))},selectedTab:a.state.tab}))))},a.state={note:void 0,loading:!0,edit:!1,tab:"write"},a.converter=new Ee.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0}),a}return Object(N.a)(t,e),t}(n.Component);var ke=Object(x.withStyles)(function(e){return{paper:{margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing.unit},contentWrapper:{margin:"40px 16px"}}})(Object(u.b)(function(e){return{noteId:e.noteId,editingNote:e.editingNote,notes:e.notes}})(we)),je=a(140),Oe=a.n(je),Ne=a(142),Se=a.n(Ne),Ce=a(143),xe=a.n(Ce),Ie=a(141),Te=a.n(Ie),Ae=a(144),_e=a.n(Ae),De=a(90),Pe=a.n(De),ze=a(91),He=a.n(ze),Re=a(146),Me=a.n(Re),Be=a(145),We=a.n(Be),Le=a(147),Fe=a.n(Le),Ue=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).handleToggle=function(){a.setState({open:!a.state.open})},a.handleClose=function(e){a.anchorEl.contains(e.target)||a.setState({open:!1})},a.logout=function(){var e=a.props.history;K.user().logout(function(){e.push("/login")},function(){e.push("/login")})},a.render=function(){var e=a.props,t=e.classes,n=e.onDrawerToggle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{className:t.header,color:"default",position:"sticky",elevation:0},r.a.createElement(Te.a,null,r.a.createElement(ie.a,{container:!0,spacing:8,alignItems:"center"},r.a.createElement(_.a,{smUp:!0},r.a.createElement(ie.a,{item:!0},r.a.createElement(ce.a,{color:"inherit","aria-label":"Open drawer",onClick:n,className:t.menuButton},r.a.createElement(Se.a,null)))),r.a.createElement(ie.a,{item:!0,xs:!0}),r.a.createElement(ie.a,{item:!0},r.a.createElement(ce.a,{buttonRef:function(e){a.anchorEl=e},"aria-owns":a.state.open?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:a.handleToggle,color:"inherit"},r.a.createElement(xe.a,{className:t.avatar})),r.a.createElement(He.a,{open:a.state.open,anchorEl:a.anchorEl,transition:!0,disablePortal:!0},function(e){var t=e.TransitionProps,n=e.placement;return r.a.createElement(Pe.a,Object.assign({},t,{id:"menu-list-grow",style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(ae.a,null,r.a.createElement(_e.a,{onClickAway:a.handleClose},r.a.createElement(We.a,null,r.a.createElement(Me.a,{onClick:a.logout},r.a.createElement(F.a,null,r.a.createElement(Fe.a,null)),r.a.createElement(ee.a,{variant:"inherit",noWrap:!0},"\xa0Logout"))))))}))))))},a.state={open:!1},a}return Object(N.a)(t,e),t}(n.Component);var qe=Object(x.withStyles)(function(e){return{secondaryBar:{zIndex:0},menuButton:{marginLeft:-e.spacing.unit},iconButtonAvatar:{padding:4},link:{textDecoration:"none",color:"rgba(255, 255, 255, 0.7)","&:hover":{color:e.palette.common.white}},button:{borderColor:"rgba(255, 255, 255, 0.7)"},header:{background:"#eaeff1"},avatar:{color:e.palette.primary.main},create:{color:e.palette.primary.dark},delete:{color:e.palette.primary.light}}})(Object(u.b)(function(e){return{editingNote:e.editingNote}})(Ue)),Ve=Object(x.createMuiTheme)({typography:{useNextVariants:!0,h5:{fontWeight:500,fontSize:26,letterSpacing:.5}},palette:{primary:{light:"#63ccff",main:"#009be5",dark:"#006db3"}},shape:{borderRadius:8}});Ve=Object(C.a)({},Ve,{overrides:{MuiDrawer:{paper:{backgroundColor:"#18202c"}},MuiButton:{label:{textTransform:"initial"},contained:{boxShadow:"none","&:active":{boxShadow:"none"}}},MuiTabs:{root:{marginLeft:Ve.spacing.unit},indicator:{height:3,borderTopLeftRadius:3,borderTopRightRadius:3,backgroundColor:Ve.palette.common.white}},MuiTab:{root:Object(S.a)({textTransform:"initial",margin:"0 16px",minWidth:0},Ve.breakpoints.up("md"),{minWidth:0}),labelContainer:Object(S.a)({padding:0},Ve.breakpoints.up("md"),{padding:0})},MuiIconButton:{root:{padding:Ve.spacing.unit}},MuiTooltip:{tooltip:{borderRadius:4}},MuiDivider:{root:{backgroundColor:"#404854"}},MuiListItemText:{primary:{fontWeight:Ve.typography.fontWeightMedium}},MuiListItemIcon:{root:{color:"inherit",marginRight:0,"& svg":{fontSize:20}}},MuiAvatar:{root:{width:32,height:32}}},props:{MuiTab:{disableRipple:!0}},mixins:Object(C.a)({},Ve.mixins,{toolbar:{minHeight:48}})});var $e={root:{display:"flex",minHeight:"100vh"},drawer:Object(S.a)({},Ve.breakpoints.up("sm"),{width:256,flexShrink:0}),appContent:{flex:1,display:"flex",flexDirection:"column"},mainContent:{flex:1,padding:"12px 24px 0",background:"#eaeff1"}},Je=function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(j.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={mobileOpen:!1},a.handleDrawerToggle=function(){a.setState(function(e){return{mobileOpen:!e.mobileOpen}})},a}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(x.MuiThemeProvider,{theme:Ve},r.a.createElement("div",{className:e.root},r.a.createElement(T.a,null),r.a.createElement("nav",{className:e.drawer},r.a.createElement(_.a,{smUp:!0,implementation:"js"},r.a.createElement(X,{PaperProps:{style:{width:256}},variant:"temporary",open:this.state.mobileOpen,onClose:this.handleDrawerToggle,history:this.props.history})),r.a.createElement(_.a,{xsDown:!0,implementation:"css"},r.a.createElement(X,{variant:"permanent",history:this.props.history,PaperProps:{style:{width:256}}}))),r.a.createElement("div",{className:e.appContent},r.a.createElement(qe,{onDrawerToggle:this.handleDrawerToggle,history:this.props.history}),r.a.createElement("main",{className:e.mainContent},r.a.createElement(ke,{history:this.props.history})))))}}]),t}(r.a.Component),Ge=Object(x.withStyles)($e)(Je),Ke=function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(j.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).componentDidUpdate=function(e){var t=a.props.match.params.noteId,n=e.match.params.noteId;console.log(t),console.log(n),t!==n&&a.props.dispatch(G(t))},a.componentWillMount=function(){a.props.dispatch(G(a.props.match.params.noteId))},a}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement(Ge,{history:this.props.history})}}]),t}(n.Component),Qe=Object(u.b)()(Ke),Xe=a(67),Ye=a.n(Xe),Ze=a(44),et=a.n(Ze),tt=a(35),at=a.n(tt),nt=a(37),rt=a.n(nt),ot=a(36),it=a.n(ot),st=a(68),ct=a.n(st),lt=a(5),mt=a.n(lt),pt=a(69),ut=a.n(pt),dt=Object(x.createMuiTheme)({typography:{useNextVariants:!0,h5:{fontWeight:500,fontSize:26,letterSpacing:.5}},palette:{primary:{light:"#63ccff",main:"#009be5",dark:"#006db3"}},shape:{borderRadius:8}}),ht=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).handleResponse=function(e){K.user().saveTokens(e.data.access_token,e.data.refresh_token,e.data.session_id),a.props.history.push("/")},a.handleError=function(e){console.log(e);a.setState({loading:!1,errors:["Issue logging in, please try again."]})},a.onChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Object(S.a)({},r,n))},a.onSubmit=function(e){console.log(e),e.preventDefault();var t=[];if(a.state.username||t.push("Invalid username"),a.state.password||t.push("Invalid password"),a.setState({errors:t}),0===t.map(function(e){return e}).join("").length){var n=a.state.password,r=a.state.username;a.setState({loading:!0}),K.user().login(r,n).then(a.handleResponse).catch(a.handleError)}},a.render=function(){var e=a.props.classes;return r.a.createElement(x.MuiThemeProvider,{theme:dt},r.a.createElement("main",{className:e.mainContent},r.a.createElement("div",{className:e.main},r.a.createElement(T.a,null),r.a.createElement("div",{className:e.logo},r.a.createElement(Ye.a,{className:e.largeAvatar},r.a.createElement(ct.a,{className:e.largeAvatarIcon}))),r.a.createElement(ae.a,{className:e.paper},r.a.createElement(ee.a,{component:"h1",variant:"h5"},"Sign in"),a.state.errors.map(function(e,t){return r.a.createElement(ee.a,{key:"error_"+t,color:"error"},e)}),r.a.createElement("form",{className:e.form},r.a.createElement(at.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(it.a,{htmlFor:"username"},"Username"),r.a.createElement(rt.a,{onChange:a.onChange,id:"username",name:"username",autoComplete:"username",autoFocus:!0})),r.a.createElement(at.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(it.a,{htmlFor:"password"},"Password"),r.a.createElement(rt.a,{onChange:a.onChange,name:"password",type:"password",id:"password",autoComplete:"current-password"})),a.state.loading&&r.a.createElement("div",{className:"center-items mt15"},r.a.createElement(re.a,null)),!a.state.loading&&r.a.createElement(r.a.Fragment,null,r.a.createElement(et.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:a.onSubmit},"Sign In"),r.a.createElement(ut.a,{light:!0,variant:"middle",className:e.divider}),r.a.createElement(et.a,{fullWidth:!0,color:"primary",className:e.button,href:"/register"},"Register")))))))},a.state={username:"",password:"",errors:[],loading:!1},a}return Object(N.a)(t,e),t}(n.Component),gt=mt()(function(e){return{main:Object(S.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},categoryHeader:{paddingTop:16,paddingBottom:16},categoryHeaderPrimary:{color:e.palette.common.white},itemActionable:{"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},itemActiveItem:{color:"#4fc3f7"},itemPrimary:{color:"inherit",fontSize:e.typography.fontSize,"&$textDense":{fontSize:e.typography.fontSize}},textDense:{},mainContent:{flex:1,padding:"12px 24px 0",background:"#eaeff1",height:"100vh"},logo:{marginTop:8*e.spacing.unit,marginBottom:4*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center"},largeAvatar:{width:64,height:64},largeAvatarIcon:{fontSize:48},divider:{margin:"12px 0px 12px 0px"}}})(ht),ft=Object(x.createMuiTheme)({typography:{useNextVariants:!0,h5:{fontWeight:500,fontSize:26,letterSpacing:.5}},palette:{primary:{light:"#63ccff",main:"#009be5",dark:"#006db3"}},shape:{borderRadius:8}}),vt=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).handleResponse=function(e){a.props.history.push("/login")},a.handleError=function(e){console.log(e);a.setState({loading:!1,errors:["Issue registering, please try again."]})},a.onChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Object(S.a)({},r,n))},a.onSubmit=function(e){console.log(e),e.preventDefault();var t=[];if(a.state.username||t.push("Invalid username"),a.state.password||t.push("Invalid password"),a.state.password!==a.state.password_confirm&&t.push("Passwords must match"),a.setState({errors:t}),0===t.map(function(e){return e}).join("").length){var n=a.state.password,r=a.state.username;a.setState({loading:!0}),K.user().register(r,n).then(a.handleResponse).catch(a.handleError)}},a.render=function(){var e=a.props.classes;return r.a.createElement(x.MuiThemeProvider,{theme:ft},r.a.createElement("main",{className:e.mainContent},r.a.createElement("div",{className:e.main},r.a.createElement(T.a,null),r.a.createElement("div",{className:e.logo},r.a.createElement(Ye.a,{className:e.largeAvatar},r.a.createElement(ct.a,{className:e.largeAvatarIcon}))),r.a.createElement(ae.a,{className:e.paper},r.a.createElement(ee.a,{component:"h1",variant:"h5"},"Register"),a.state.errors.map(function(e,t){return r.a.createElement(ee.a,{key:"error_"+t,color:"error"},e)}),r.a.createElement("form",{className:e.form},r.a.createElement(at.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(it.a,{htmlFor:"username"},"Username"),r.a.createElement(rt.a,{onChange:a.onChange,id:"username",name:"username",autoComplete:"username",autoFocus:!0})),r.a.createElement(at.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(it.a,{htmlFor:"password"},"Password"),r.a.createElement(rt.a,{onChange:a.onChange,name:"password",type:"password",id:"password",autoComplete:"current-password"})),r.a.createElement(at.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(it.a,{htmlFor:"password_confirm"},"Confirm Password"),r.a.createElement(rt.a,{onChange:a.onChange,name:"password_confirm",type:"password",id:"password_confirm",autoComplete:"password_confirm"})),a.state.loading&&r.a.createElement("div",{className:"center-items mt15"},r.a.createElement(re.a,null)),!a.state.loading&&r.a.createElement(r.a.Fragment,null,r.a.createElement(et.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:a.onSubmit},"Register"),r.a.createElement(ut.a,{light:!0,variant:"middle",className:e.divider}),r.a.createElement(et.a,{fullWidth:!0,color:"primary",className:e.button,href:"/login"},"Login")))))))},a.state={username:"",password:"",password_confirm:"",errors:[],loading:!1},a}return Object(N.a)(t,e),t}(n.Component),bt=mt()(function(e){return{main:Object(S.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},categoryHeader:{paddingTop:16,paddingBottom:16},categoryHeaderPrimary:{color:e.palette.common.white},itemActionable:{"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},itemActiveItem:{color:"#4fc3f7"},itemPrimary:{color:"inherit",fontSize:e.typography.fontSize,"&$textDense":{fontSize:e.typography.fontSize}},textDense:{},mainContent:{flex:1,padding:"12px 24px 0",background:"#eaeff1",height:"100vh"},logo:{marginTop:8*e.spacing.unit,marginBottom:4*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center"},largeAvatar:{width:64,height:64},largeAvatarIcon:{fontSize:48},divider:{margin:"12px 0px 12px 0px"}}})(vt),Et=function(e){function t(){return Object(w.a)(this,t),Object(j.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement(c.a,null,r.a.createElement(l.a,{path:"/login",component:gt}),r.a.createElement(l.a,{path:"/register",component:bt}))}}]),t}(n.Component);a(333);p.a.interceptors.response.use(function(e){return e},function(e){return 401===e.response.status&&e.response.data.error&&"invalid access token"===e.response.data.error?K.user().refreshToken().then(function(t){if(console.log("refreshed access token."),t)return K.setAccessToken(t.data.access_token),e.config.headers.Authorization="Bearer "+t.data.access_token,p.a.request(e.config)}):401===e.response.status||404===e.response.status&&e.response.data.message&&"error creating access token."===e.response.data.message?void K.user().logout(function(){yt.push("/login")},function(){yt.push("/login")}):Promise.reject(e.response)});var yt=y()();i.a.render(r.a.createElement(u.a,{store:b},r.a.createElement(function(){return r.a.createElement("div",null,r.a.createElement(s.a,{history:yt},r.a.createElement(c.a,null,r.a.createElement(l.a,{path:"/login",component:Et}),r.a.createElement(l.a,{path:"/register",component:Et}),r.a.createElement(l.a,{path:"/:noteId",component:function(e){var t=e.history,a=e.match;return r.a.createElement(Qe,{history:t,match:a})}}),r.a.createElement(l.a,{path:"/",component:function(e){var t=e.history,a=e.match;return r.a.createElement(Qe,{history:t,match:a})}}))))},null)),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.331d8efa.chunk.js.map